{
  "$schema": "../../../../projects/page/schema.json",
  "apis": {
    "deviceWindowsList": "/basic-ast/ast/device/windows/list"
  },
  "navs": [
    {
      "type": "tree",
      "api": "apis.secobjectgroupFind",
      "body": {
        "parentOrgId": 0,
        "recursion": true
      },
      "key": "groupId",
      "nameKey": "groupName",
      "parentKey": "parentGroupId",
      "mappingKey": "astGroup",
      "form": [
        {
          "fields": [
            {
              "type": "input",
              "label": "父组",
              "key": "$groupName",
              "readonly": true,
              "show": "d=>d.$groupName"
            },
            {
              "type": "input",
              "label": "组名称",
              "key": "groupName",
              "required": true
            },
            {
              "type": "textarea",
              "label": "描述",
              "key": "groupDescription"
            }
          ]
        }
      ],
      "create": {
        "api": "apis.secobjectgroupCreate"
      },
      "update": {
        "api": "apis.secobjectgroupUpdate"
      },
      "delete": {
        "api": "apis.secobjectgroupDelete"
      }
    }
  ],
  "tabs": [
    {
      "title": "Unix主机",
      "view": {
        "api": "apis.deviceLinuxList",
        "body": {
          "astType": -101,
          "type": "unix"
        }
      }
    },
    {
      "title": "Windows主机",
      "view": {
        "api": "apis.deviceWindowsList",
        "body": {
          "astType": -102,
          "type": "windows"
        }
      }
    }
  ],
  "table": {
    "title": "Unix主机",
    "key": "astId",
    "view": {
      "api": "apis.deviceLinuxList",
      "columns": [
        {
          "type": "default",
          "label": "主机名称",
          "key": "astName",
          "search": true
        },
        {
          "type": "default",
          "label": "主机IP",
          "key": "astIp",
          "search": true
        },
        {
          "type": "default",
          "label": "资产组",
          "key": "groupName"
        },
        {
          "type": "default",
          "label": "连通性状态",
          "key": "astName",
          "format": "d=>d?'网络可达':'网络不通'"
        },
        {
          "type": "switch",
          "label": "状态",
          "key": "astStatus",
          "switch": {
            "enable": {
              "api": "apis.deviceEnable"
            },
            "disable": {
              "api": "apis.deviceDisable"
            }
          }
        }
      ]
    },
    "form": [
      {
        "cols": 3,
        "fields": [
          {
            "type": "treeselect",
            "label": "资产组",
            "key": "astGroup",
            "treeselect": {
              "api": "apis.secobjectgroupFind",
              "body": {
                "parentOrgId": 0,
                "recursion": true
              },
              "key": "groupId",
              "nameKey": "groupName",
              "parentKey": "parentGroupId"
            }
          },
          {
            "type": "input",
            "label": "资产名称",
            "key": "astName",
            "required": true
          },
          {
            "type": "input",
            "label": "资产IP",
            "key": "astIP",
            "required": true,
            "pattern": "IP"
          },
          {
            "type": "input",
            "label": "机房地址",
            "key": "serverRoomAddress"
          },
          {
            "type": "select",
            "label": "生产厂商",
            "key": "astVendor",
            "select": {
              "api": "apis.unixDicList",
              "body": {
                "dicTypeCode": "UNIX_VENDOR"
              },
              "nameKey": "dicName"
            }
          },
          {
            "type": "select",
            "label": "主机类型",
            "key": "drivertype",
            "select": {
              "api": "apis.unixDicList",
              "body": {
                "dicTypeCode": "UNIX_TYPE"
              },
              "nameKey": "dicName"
            }
          },
          {
            "type": "select",
            "label": "设备类型",
            "key": "cmDeviceSubType",
            "required": true,
            "select": {
              "api": "apis.unixDeviceTypeList",
              "body": {
                "astType": -101
              },
              "nameKey": "deviceSubType"
            }
          },
          {
            "type": "select",
            "label": "系统版本",
            "key": "version",
            "select": {
              "api": "apis.unixDicList",
              "body": {
                "dicTypeCode": "UNIX_SYSTEM"
              },
              "nameKey": "dicName"
            }
          },
          {
            "type": "select",
            "label": "业务系统",
            "key": "busId",
            "required": true,
            "select": {
              "api": "apis.unixAstFindBusiness",
              "body": {
                "dicTypeCode": "UNIX_SYSTEM"
              },
              "valueKey": "busId",
              "nameKey": "busName"
            }
          },
          {
            "type": "select",
            "label": "虚拟资产",
            "key": "isvirres",
            "value": false,
            "select": {
              "options": [
                {
                  "label": "是",
                  "value": true
                },
                {
                  "label": "否",
                  "value": false
                }
              ]
            }
          },
          {
            "type": "input",
            "label": "虚拟ID",
            "key": "virresid",
            "show": "d=>d.isvirres"
          },
          {
            "type": "input",
            "label": "物理机IP",
            "key": "physicalmacip",
            "required": true,
            "show": "d=>d.isvirres",
            "pattern": "IP"
          },
          {
            "type": "select",
            "label": "资产重要性",
            "key": "astImportanceLevel",
            "value": 3,
            "select": {
              "options": [
                {
                  "label": "可以忽略",
                  "value": 1
                },
                {
                  "label": "低",
                  "value": 2
                },
                {
                  "label": "中等",
                  "value": 3
                },
                {
                  "label": "高",
                  "value": 4
                },
                {
                  "label": "非常高",
                  "value": 5
                }
              ]
            }
          }
        ]
      }
    ],
    "create": {
      "api": "apis.deviceLinuxCreate"
    },
    "update": {
      "api": "apis.deviceLinuxUpdate"
    },
    "delete": {
      "api": "apis.deviceDelete"
    }
  }
}
