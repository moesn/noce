{
  "$schema": "../../../../lib3/projects/page/schema.json",
  "apis": {
    "deviceWindowsList": "/basic-ast/ast/device/windows/list"
  },
  "navs": [
    {
      "type": "tree",
      "api": "apis.secobjectgroupFind",
      "body": {
        "parentOrgId": 0,
        "recursion": true
      },
      "key": "groupId",
      "nameKey": "groupName",
      "parentKey": "parentGroupId",
      "mappingKey": "astGroup",
      "form": [
        {
          "fields": [
            {
              "type": "input",
              "label": "父组",
              "key": "$groupName",
              "readonly": true,
              "show": "d=>d.$groupName"
            },
            {
              "type": "input",
              "label": "组名称",
              "key": "groupName",
              "required": true
            },
            {
              "type": "textarea",
              "label": "描述",
              "key": "groupDescription"
            }
          ]
        }
      ],
      "create": {
        "api": "apis.secobjectgroupCreate"
      },
      "update": {
        "api": "apis.secobjectgroupUpdate"
      },
      "delete": {
        "api": "apis.secobjectgroupDelete"
      }
    }
  ],
  "tabs": [
    {
      "title": "Unix主机",
      "view": {
        "api": "apis.deviceLinuxList",
        "body": {
          "astType": -101,
          "type": "unix"
        }
      }
    },
    {
      "title": "Windows主机",
      "view": {
        "api": "apis.deviceWindowsList",
        "body": {
          "astType": -102,
          "type": "windows"
        }
      }
    }
  ],
  "table": {
    "title": "Unix主机",
    "key": "astId",
    "view": {
      "api": "apis.deviceLinuxList",
      "columns": [
        {
          "type": "default",
          "label": "主机名称",
          "key": "astName",
          "search": true
        },
        {
          "type": "default",
          "label": "主机IP",
          "key": "astIp",
          "search": true
        },
        {
          "type": "default",
          "label": "资产组",
          "key": "groupName"
        },
        {
          "type": "default",
          "label": "连通性状态",
          "key": "astName",
          "format": "d=>d?'网络可达':'网络不通'"
        },
        {
          "type": "switch",
          "label": "状态",
          "key": "astStatus",
          "switch": {
            "enable": {
              "api": "apis.deviceEnable"
            },
            "disable": {
              "api": "apis.deviceDisable"
            }
          }
        }
      ]
    },
    "form": [
      {
        "cols": 3,
        "fields": [
          {
            "type": "treeselect",
            "label": "资产组",
            "key": "astGroup",
            "treeselect": {
              "api": "apis.secobjectgroupFind",
              "body": {
                "parentOrgId": 0,
                "recursion": true
              },
              "key": "groupId",
              "nameKey": "groupName",
              "parentKey": "parentGroupId"
            }
          }
        ]
      }
    ],
    "create": {
      "api": "apis.deviceLinuxCreate"
    },
    "update": {
      "api": "apis.deviceLinuxUpdate"
    },
    "delete": {
      "api": "apis.deviceDelete"
    }
  }
}
